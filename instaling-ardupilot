git clone https://github.com/ArduPilot/ardupilot.git

cd ardupilot
git checkout Copter-4.3.7 | Plane-4.4
git submodule update --init --recursive

sudo apt install python-matplotlib python-serial python-wxgtk3.0 python-wxtools python-lxml python-scipy python-opencv ccache gawk python-pip python-pexpect
sudo pip install future pymavlink MAVProxy

gedit ~/.bashrc

Add this lines at the end of bashrc file
export PATH=$PATH:$HOME/ardupilot/Tools/autotest
export PATH=/usr/lib/ccache:$PATH

now reload it once
. ~/.bashrc

Run Simulator
cd ~/ardupilot/ArduCopter
sim_vehicle.py -w
