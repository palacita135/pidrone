# How to build a Raspberry Pi NAS
# To ensure your Raspberry Pi is set up correctly for networking, run:
sudo rm -f /etc/systemd/network/99-default.link
sudo reboot

# To install OpenMediaVault, run:
sudo wget -O - https://github.com/OpenMediaVault-Plugin-Developers/installScript/raw/master/install | sudo bash

# Setting up OpenMediaVault
Open the internet browser on your usual computer and type your Raspberry Pi’s IP address into the address bar.

Sign in to OpenMediaVault using the following credentials:
Username: admin
Password: openmediavault

Set up network access
Select Storage and then Disks. All your attached storage, including the SD card, should show. If not, double-check everything is plugged in correctly and reboot the system.

A screenshot of OpenMediaVault open in a browser window. The Storage and Disks menu is displayed. 
Next, navigate to Storage and File Systems. You likely won’t see anything here, so select Create. Here, you can select your storage device. We recommend selecting EXT4 for the drive format. Select OK and close.

A screenshot of OpenMediaVault open in a browser window. The Storage and Disks menu is displayed
Select the file system to mount it and apply changes.

A screenshot of OpenMediaVault open in a browser window. The Storage and Disks menu is displayed
Now, we need to create a shared folder. 

A screenshot of OpenMediaVault open in a browser window. The Storage and Disks menu is displayed
Navigate to Storage and Shared Folders and select Create. Here you can name the folder, select which drive it should exist on, and grant permissions to users. By default, the permissions should be correct, but you can tweak them if you prefer a different option for your network preferences. Save and apply changes.

Lastly, we need to make sure computers on your network can find the folder. 

Navigate to Services and select SMB/CIFS.

A screenshot of OpenMediaVault open in a browser window. The Storage and Shared Folders menu is displayed
Under Settings, check the Enabled box and save. Under Shares, select Create, add your shared folder, and save.

Your NAS system should now be ready to use.

==============================================================================================================================================================

https://www.pcmag.com/how-to/how-to-turn-a-raspberry-pi-into-a-nas-for-whole-home-file-sharing

Install Raspbian OS
sudo fdisk -l
#if you're using a terminal over SSH, you'll have to run:
umount /dev/sda1
#Depending on the drive, you may need to also run umount /dev/sda2, umount /dev/sda3, and so on, depending on how many partitions are on the drive from previous usage.
#Then, to erase and format your flash drive for Linux usage, run:
sudo parted /dev/sda

mklabel gpt

#If prompted to erase the drive, type y and press Enter. Then run:

mkpart
MyExternalDrive
ext4
0%
100%
quit

#Next, we'll need to format that partition. If your drive is located at /dev/sda, the new partition will be located at /dev/sda1 (if the drive is /dev/sdb, you'll use /dev/sdb1, and so on):

sudo mkfs.ext4 /dev/sda1

#Press y and Enter when asked if you want to proceed. Then run:

sudo e2label /dev/sda1 MyExternalDrive

sudo shutdown -r now

sudo chown -R pi /media/pi/MyExternalDrive

sudo apt update
sudo apt upgrade
sudo apt install samba samba-common

sudo nano /etc/samba/smb.conf
[MyMedia]
path = /media/pi/MyExternalDrive/
writeable = yes
create mask = 0775
directory mask = 0775
public=no

Ctrl+X Yes Enter

sudo smbpasswd -a pi
sudo systemctl restart smbd

Access Your Media
And everything should be ready to rock. Head to your Windows PC, open a File Explorer window
and type \\raspberrypi\MyMedia in the address bar (replacing MyMedia with whatever your share is called).
If you press Enter, you should be able to enter your Samba username (pi) and password and see your shared drive.
If you run into trouble, you might have to use the Pi's IP address, like \\192.168.1.10\MyMedia instead.

To connect on a Mac, open Finder and click Go > Connect to Server, typing in smb://raspberrypi when prompted.
